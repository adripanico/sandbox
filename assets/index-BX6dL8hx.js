(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}})();const i=300,d=[[0,0,.8,0,0],[0,.8,1,.5,0],[.8,1,1,1,.8],[.5,1,1,1,.5],[0,.5,.8,.5,0]],t={canvas:null,currentColor:[0,0,0],currentMode:"warm",isMouseDown:!1};function v(){t.currentMode==="warm"?t.currentColor[0]<255?t.currentColor[0]++:t.currentColor[1]<255?t.currentColor[1]++:t.currentColor[2]<255?t.currentColor[2]++:(t.currentColor[0]=0,t.currentColor[1]=0,t.currentColor[2]=0):t.currentColor[2]<255?t.currentColor[2]++:t.currentColor[1]<255?t.currentColor[1]++:t.currentColor[0]<255?t.currentColor[0]++:(t.currentColor[0]=0,t.currentColor[1]=0,t.currentColor[2]=0)}function g(r){const a=t.canvas.getContext("2d"),o=d.length;if(a.getImageData(r.x,r.y,o,o).data.some(s=>s!==0))return;const e=a.createImageData(o,o);for(let s=0;s<o;s++)for(let c=0;c<o;c++)e.data[s*o*4+c*4]=t.currentColor[0],e.data[s*o*4+c*4+1]=t.currentColor[1],e.data[s*o*4+c*4+2]=t.currentColor[2],e.data[s*o*4+c*4+3]=Math.floor(d[s][c]*255);a.putImageData(e,r.x,r.y),v()}function p(r){const a=[];for(let o=0;o<i;o++){const n=[];for(let e=0;e<i;e++){const s=o*i*4+e*4;n.push([r.data[s],r.data[s+1],r.data[s+2],r.data[s+3]])}a.push(n)}return a}function C(r){return r.flat().flat()}function h(){const r=t.canvas.getContext("2d"),a=r.getImageData(0,0,i,i),o=p(a);for(let n=i-1;n>=0;n--)for(let e=i-1;e>=0;e--)if(n===i-1)o[n][e][3]=Number(o[n][e][3])!==255?0:255;else if(o[n][e][3]!==0){const s=o[n+1][e][3]===0,c=e>0&&o[n+1][e-1][3]===0,l=e<i-1&&o[n+1][e+1][3]===0;if(s)o[n+1][e]=o[n][e],o[n][e]=[0,0,0,0];else if(c||l){const u=c&&l?Math.random()>.5?"l":"r":c?"l":l?"r":void 0;u==="l"?(o[n+1][e-1]=o[n][e],o[n][e]=[0,0,0,0]):u==="r"&&(o[n+1][e+1]=o[n][e],o[n][e]=[0,0,0,0])}else o[n][e][3]=Number(o[n][e][3])!==255?0:255}a.data.set(C(o)),r.putImageData(a,0,0),requestAnimationFrame(h)}const f=()=>t.isMouseDown=!0,m=()=>t.isMouseDown=!1,w=r=>{const a=r.offsetX,o=r.offsetY;t.isMouseDown&&g({x:a,y:o})},y=r=>{const a=r.target.getBoundingClientRect(),o=r.targetTouches[0].pageX-a.left,n=r.targetTouches[0].pageY-a.top;t.isMouseDown&&g({x:o,y:n})},x=()=>{var r;return(r=t.canvas)==null?void 0:r.getContext("2d").clearRect(0,0,i,i)},E=()=>{t.currentColor=[0,0,0],t.currentMode=t.currentMode==="cold"?"warm":"cold",document.getElementById("switch-btn").innerText=`switch to ${t.currentMode==="cold"?"warm":"cold"}`},I=()=>{const r={files:[new File([t.canvas.toDataURL("image/png")],"image.png")],text:"Look what I did on https://adripanico.github.io/sandbox",url:"https://adripanico.github.io/sandbox"};navigator.canShare(r)&&navigator.share(r)};function L(){if(t.canvas.addEventListener("mousedown",f),t.canvas.addEventListener("touchstart",f),t.canvas.addEventListener("mouseup",m),t.canvas.addEventListener("touchend",m),t.canvas.addEventListener("mousemove",w),t.canvas.addEventListener("touchmove",y),document.getElementById("reset-btn").addEventListener("click",x),document.getElementById("switch-btn").addEventListener("click",E),navigator.share!==void 0){const r=document.getElementById("share-btn");r==null||r.classList.remove("hidden"),r==null||r.addEventListener("click",I)}}function M(){if(t.canvas=document.getElementById("canvas"),!t.canvas)throw Error("Canvas element not found!");t.canvas.width=t.canvas.height=i,t.canvas.style.width=t.canvas.style.height=`${i}px`,h(),L()}M();
