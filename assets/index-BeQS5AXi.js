(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}})();const i=300,d=[[0,0,.8,0,0],[0,.8,1,.5,0],[.8,1,1,1,.8],[.5,1,1,1,.5],[0,.5,.8,.5,0]],t={canvas:null,currentColor:[0,0,0],currentMode:"warm",isMouseDown:!1};function v(){t.currentMode==="warm"?t.currentColor[0]<255?t.currentColor[0]++:t.currentColor[1]<255?t.currentColor[1]++:t.currentColor[2]<255?t.currentColor[2]++:(t.currentColor[0]=0,t.currentColor[1]=0,t.currentColor[2]=0):t.currentColor[2]<255?t.currentColor[2]++:t.currentColor[1]<255?t.currentColor[1]++:t.currentColor[0]<255?t.currentColor[0]++:(t.currentColor[0]=0,t.currentColor[1]=0,t.currentColor[2]=0)}function g(r){const s=t.canvas.getContext("2d"),o=d.length;if(s.getImageData(r.x,r.y,o,o).data.some(a=>a!==0))return;const e=s.createImageData(o,o);for(let a=0;a<o;a++)for(let c=0;c<o;c++)e.data[a*o*4+c*4]=t.currentColor[0],e.data[a*o*4+c*4+1]=t.currentColor[1],e.data[a*o*4+c*4+2]=t.currentColor[2],e.data[a*o*4+c*4+3]=Math.floor(d[a][c]*255);s.putImageData(e,r.x,r.y),v()}function p(r){const s=[];for(let o=0;o<i;o++){const n=[];for(let e=0;e<i;e++){const a=o*i*4+e*4;n.push([r.data[a],r.data[a+1],r.data[a+2],r.data[a+3]])}s.push(n)}return s}function C(r){return r.flat().flat()}function h(){const r=t.canvas.getContext("2d"),s=r.getImageData(0,0,i,i),o=p(s);for(let n=i-1;n>=0;n--)for(let e=i-1;e>=0;e--)if(n===i-1)o[n][e][3]=Number(o[n][e][3])!==255?0:255;else if(o[n][e][3]!==0){const a=o[n+1][e][3]===0,c=e>0&&o[n+1][e-1][3]===0,l=e<i-1&&o[n+1][e+1][3]===0;if(a)o[n+1][e]=o[n][e],o[n][e]=[0,0,0,0];else if(c||l){const u=c&&l?Math.random()>.5?"l":"r":c?"l":l?"r":void 0;u==="l"?(o[n+1][e-1]=o[n][e],o[n][e]=[0,0,0,0]):u==="r"&&(o[n+1][e+1]=o[n][e],o[n][e]=[0,0,0,0])}else o[n][e][3]=Number(o[n][e][3])!==255?0:255}s.data.set(C(o)),r.putImageData(s,0,0),requestAnimationFrame(h)}const f=()=>t.isMouseDown=!0,m=()=>t.isMouseDown=!1,w=r=>{const s=r.offsetX,o=r.offsetY;t.isMouseDown&&g({x:s,y:o})},y=r=>{const s=r.target.getBoundingClientRect(),o=r.targetTouches[0].pageX-s.left,n=r.targetTouches[0].pageY-s.top;t.isMouseDown&&g({x:o,y:n})},x=()=>{var r;return(r=t.canvas)==null?void 0:r.getContext("2d").clearRect(0,0,i,i)},E=()=>{t.currentColor=[0,0,0],t.currentMode=t.currentMode==="cold"?"warm":"cold",document.getElementById("switch-btn").innerText=`switch to ${t.currentMode==="cold"?"warm":"cold"}`},b=async()=>{const r=t.canvas.toDataURL("image/png"),s=await(await fetch(r)).blob(),n={files:[new File([s],"sandbox.png",{type:s.type,lastModified:new Date().getTime()})],text:"Look what I did on https://adripanico.github.io/sandbox/",url:"https://adripanico.github.io/sandbox/"};navigator.canShare(n)&&navigator.share(n)};function M(){if(t.canvas.addEventListener("mousedown",f),t.canvas.addEventListener("touchstart",f),t.canvas.addEventListener("mouseup",m),t.canvas.addEventListener("touchend",m),t.canvas.addEventListener("mousemove",w),t.canvas.addEventListener("touchmove",y),document.getElementById("reset-btn").addEventListener("click",x),document.getElementById("switch-btn").addEventListener("click",E),navigator.share!==void 0){const r=document.getElementById("share-btn");r==null||r.classList.remove("hidden"),r==null||r.addEventListener("click",b)}}function I(){if(t.canvas=document.getElementById("canvas"),!t.canvas)throw Error("Canvas element not found!");t.canvas.width=t.canvas.height=i,t.canvas.style.width=t.canvas.style.height=`${i}px`,h(),M()}I();
